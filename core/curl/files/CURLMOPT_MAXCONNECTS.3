.\" generated by cd2nroff 0.1 from CURLMOPT_MAXCONNECTS.md
.TH CURLMOPT_MAXCONNECTS 3 "2024-12-25" libcurl
.SH NAME
CURLMOPT_MAXCONNECTS \- size of connection cache
.SH SYNOPSIS
.nf
#include <curl/curl.h>

CURLMcode curl_multi_setopt(CURLM *handle, CURLMOPT_MAXCONNECTS, long max);
.fi
.SH DESCRIPTION
Pass a long indicating the \fBmax\fP, the maximum amount of connections that
libcurl may keep alive in its connection cache after use. By default libcurl
enlarges the size for each added easy handle to make it fit 4 times the number
of added easy handles.

By setting this option, you prevent the cache size from growing beyond the
limit set by you.

When the cache is full, curl closes the oldest connection present in the cache
to prevent the number of connections from increasing.

This option is for the multi handle\(aqs use only, when using the easy interface
you should instead use the \fICURLOPT_MAXCONNECTS(3)\fP option.

See \fICURLMOPT_MAX_TOTAL_CONNECTIONS(3)\fP for limiting the number of active
connections.

Changing this value when there are transfers in progress is possible, and the
new value is then used the next time checks are performed. Lowering the value
does not close down any active transfers, it simply does not allow new ones to
get made.
.SH DEFAULT
See DESCRIPTION
.SH PROTOCOLS
This functionality affects all supported protocols
.SH EXAMPLE
.nf
int main(void)
{
  CURLM *m = curl_multi_init();
  /* only keep 10 connections in the cache */
  curl_multi_setopt(m, CURLMOPT_MAXCONNECTS, 10L);
}
.fi
.SH AVAILABILITY
Added in curl 7.16.3
.SH RETURN VALUE
Returns CURLM_OK if the option is supported, and CURLM_UNKNOWN_OPTION if not.
.SH SEE ALSO
.BR CURLMOPT_MAX_HOST_CONNECTIONS (3),
.BR CURLOPT_MAXCONNECTS (3)
